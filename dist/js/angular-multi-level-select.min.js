!function(){"use strict";angular.module("nx.widget",[])}(),function(e,t){"use strict";e.module("nx.widget").directive("nxMultiLevelSelect",["$parse","$timeout",function(n,i){function a(a,r,l,m){function c(){var n={};f&&e.forEach(f,function(e){n[e]=o[e].getValue()}),function(e){var r=a.source?a.source(n):!1;!r||(r=r.then?r:{then:function(e){return function(n){n.call(t,e)}}(r)}).then(function(t){for(var n in e)if(e[n]!==o[n].getValue())return;a.items=t,i(function(){if(a.items===t){a.empty?m.$setViewValue(u):m.$setViewValue(a.items[0].value);var e=!d&&function(){for(var e=0;e<a.items.length;e++)if(a.items[e].value===s)return!0;return!1}();e&&(d=!0,m.$setViewValue(s)),m.$render()}})})}(n)}var s,d,f=a.dependents?a.dependents.split(","):!1,p=a.$parent;a.name=a.name||"multi-select-"+Math.floor(9e5*Math.random()+1e5),o[a.name]={getValue:function(){return n(a.modelName)(p)}},s=o[a.name].getValue(),d=s!=u,m.$setViewValue(u),f?a.$on("selectUpdate",function(e,t){f.indexOf(t.name)>-1&&c()}):c(),p.$watch(a.modelName,function(e,t){(e||u!==t||u)&&a.$root.$broadcast("selectUpdate",{name:a.name})})}var o={},u="";return{restrict:"A",template:'<option ng-show="empty" value="">{{empty}}</option><option ng-repeat="item in items" value="{{item.value}}">{{item.text}}</option>',scope:{name:"@name",dependents:"@dependents",source:"=source",empty:"@empty",modelName:"@ngModel"},require:"ngModel",link:a}}])}(angular,window);